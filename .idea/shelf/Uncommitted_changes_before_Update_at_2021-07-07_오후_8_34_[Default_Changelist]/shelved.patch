Index: app/src/main/java/com/cookandroid/scholarshiplike/MyFirebaseMessagingService.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.cookandroid.scholarshiplike\r\n\r\nimport android.app.NotificationChannel\r\nimport android.app.NotificationManager\r\nimport android.app.PendingIntent\r\nimport android.content.Intent\r\nimport android.media.RingtoneManager\r\nimport android.os.Build\r\nimport android.widget.RemoteViews\r\nimport androidx.core.app.NotificationCompat\r\nimport com.google.firebase.messaging.FirebaseMessagingService\r\nimport com.google.firebase.messaging.RemoteMessage\r\n\r\n\r\nclass MyFirebaseMessagingService : FirebaseMessagingService() {\r\n    override fun onMessageReceived(remoteMessage: RemoteMessage) {\r\n        if (remoteMessage.data.size > 0) {\r\n            showNotification(remoteMessage.data[\"title\"], remoteMessage.data[\"message\"])\r\n        }\r\n        if (remoteMessage.notification != null) {\r\n            showNotification(\r\n                remoteMessage.notification!!.title, remoteMessage.notification!!\r\n                    .body\r\n            )\r\n        }\r\n    }\r\n\r\n    private fun getCustomDesign(title: String?, message: String?): RemoteViews {\r\n        val remoteViews = RemoteViews(applicationContext.packageName, R.layout.notification)\r\n        remoteViews.setTextViewText(R.id.noti_title, title)\r\n        remoteViews.setTextViewText(R.id.noti_message, message)\r\n        remoteViews.setImageViewResource(R.id.noti_icon, R.mipmap.ic_launcher)\r\n        return remoteViews\r\n    }\r\n\r\n    private fun showNotification(title: String?, message: String?) {\r\n        val intent = Intent(this, MainActivity::class.java)\r\n        val channel_id = \"channel\"\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)\r\n        val pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT)\r\n        val uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)\r\n        var builder = NotificationCompat.Builder(\r\n            applicationContext, channel_id\r\n        )\r\n            .setSmallIcon(R.mipmap.ic_launcher)\r\n            .setSound(uri)\r\n            .setAutoCancel(true)\r\n            .setVibrate(longArrayOf(1000, 1000, 1000, 1000, 1000))\r\n            .setOnlyAlertOnce(true)\r\n            .setContentIntent(pendingIntent)\r\n        builder = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {\r\n            builder.setContent(getCustomDesign(title, message))\r\n        } else {\r\n            builder.setContentTitle(title)\r\n                .setContentText(message)\r\n                .setSmallIcon(R.mipmap.ic_launcher)\r\n        }\r\n        val notificationManager = getSystemService(NOTIFICATION_SERVICE) as NotificationManager\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\r\n            val notificationChannel =\r\n                NotificationChannel(channel_id, \"web_app\", NotificationManager.IMPORTANCE_HIGH)\r\n            notificationChannel.setSound(uri, null)\r\n            notificationManager.createNotificationChannel(notificationChannel)\r\n        }\r\n        notificationManager.notify(0, builder.build())\r\n    }\r\n}
===================================================================
--- app/src/main/java/com/cookandroid/scholarshiplike/MyFirebaseMessagingService.kt	(revision 5fcdb963c5372de047e67a33db66cf86028df8b7)
+++ app/src/main/java/com/cookandroid/scholarshiplike/SLFirebaseMessagingService.kt	(date 1625655754890)
@@ -1,67 +1,20 @@
 package com.cookandroid.scholarshiplike
 
-import android.app.NotificationChannel
-import android.app.NotificationManager
-import android.app.PendingIntent
-import android.content.Intent
-import android.media.RingtoneManager
-import android.os.Build
-import android.widget.RemoteViews
-import androidx.core.app.NotificationCompat
+import android.util.Log
 import com.google.firebase.messaging.FirebaseMessagingService
 import com.google.firebase.messaging.RemoteMessage
 
 
-class MyFirebaseMessagingService : FirebaseMessagingService() {
-    override fun onMessageReceived(remoteMessage: RemoteMessage) {
-        if (remoteMessage.data.size > 0) {
-            showNotification(remoteMessage.data["title"], remoteMessage.data["message"])
-        }
-        if (remoteMessage.notification != null) {
-            showNotification(
-                remoteMessage.notification!!.title, remoteMessage.notification!!
-                    .body
-            )
-        }
-    }
+class SLFirebaseMessagingService : FirebaseMessagingService() {
+    override fun onMessageReceived(p0: RemoteMessage) {
+        super.onMessageReceived(p0)
+        if(p0.data.isNotEmpty()){
 
-    private fun getCustomDesign(title: String?, message: String?): RemoteViews {
-        val remoteViews = RemoteViews(applicationContext.packageName, R.layout.notification)
-        remoteViews.setTextViewText(R.id.noti_title, title)
-        remoteViews.setTextViewText(R.id.noti_message, message)
-        remoteViews.setImageViewResource(R.id.noti_icon, R.mipmap.ic_launcher)
-        return remoteViews
-    }
-
-    private fun showNotification(title: String?, message: String?) {
-        val intent = Intent(this, MainActivity::class.java)
-        val channel_id = "channel"
-        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
-        val pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT)
-        val uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)
-        var builder = NotificationCompat.Builder(
-            applicationContext, channel_id
-        )
-            .setSmallIcon(R.mipmap.ic_launcher)
-            .setSound(uri)
-            .setAutoCancel(true)
-            .setVibrate(longArrayOf(1000, 1000, 1000, 1000, 1000))
-            .setOnlyAlertOnce(true)
-            .setContentIntent(pendingIntent)
-        builder = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
-            builder.setContent(getCustomDesign(title, message))
-        } else {
-            builder.setContentTitle(title)
-                .setContentText(message)
-                .setSmallIcon(R.mipmap.ic_launcher)
         }
-        val notificationManager = getSystemService(NOTIFICATION_SERVICE) as NotificationManager
-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
-            val notificationChannel =
-                NotificationChannel(channel_id, "web_app", NotificationManager.IMPORTANCE_HIGH)
-            notificationChannel.setSound(uri, null)
-            notificationManager.createNotificationChannel(notificationChannel)
-        }
-        notificationManager.notify(0, builder.build())
+    }
+
+    override fun onNewToken(p0: String) {
+        super.onNewToken(p0)
+        Log.e("FCM Token", p0)
     }
 }
\ No newline at end of file
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.cookandroid.scholarshiplike\">\r\n\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@drawable/ic_logo\"\r\n        android:label=\"@string/app_name_korean\"\r\n        android:roundIcon=\"@drawable/ic_round_button_background\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\" >\r\n\r\n        <service\r\n            android:name=\".MyFirebaseMessagingService\"\r\n            android:exported=\"false\">\r\n            <intent-filter>\r\n                <action android:name=\"com.google.firebase.MESSAGING_EVENT\" />\r\n            </intent-filter>\r\n        </service>\r\n\r\n        <!-- Set custom default icon. This is used when no icon is set for incoming notification messages.\r\n            See README(https://goo.gl/l4GJaQ) for more. -->\r\n        <meta-data\r\n            android:name=\"com.google.firebase.messaging.default_notification_icon\"\r\n            android:resource=\"@drawable/ic_notifications_black_24dp\" />\r\n        <!-- Set color used with incoming notification messages. This is used when no color is set for the incoming\r\n             notification message. See README(https://goo.gl/6BKBk7) for more. -->\r\n        <meta-data\r\n            android:name=\"com.google.firebase.messaging.default_notification_color\"\r\n            android:resource=\"@color/noti\" />\r\n\r\n        <!--\r\n        <meta-data\r\n            android:name=\"com.google.firebase.messaging.default_notification_channel_id\"\r\n            android:value=\"@string/default_notification_channel_id\" />\r\n        -->\r\n\r\n        <!-- AdMob -->\r\n        <meta-data\r\n            android:name=\"com.google.android.gms.ads.APPLICATION_ID\"\r\n            android:value=\"ca-app-pub-8292925275124668~6270528480\" />\r\n        <activity android:name=\".ProfileChangeActivity\"/>\r\n\r\n        <activity\r\n            android:name=\".MainActivity\"\r\n            android:theme=\"@style/SplashTheme\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n\r\n        <!-- 로그인 -->\r\n        <activity android:name=\".LoginActivity\"/>\r\n\r\n        <!-- 비밀번호 재설정 -->\r\n        <activity android:name=\".LoginPasswordResetActivity\"/>\r\n\r\n        <!-- 회원가입 -->\r\n        <activity android:name=\".SignupActivity\"/>\r\n\r\n        <!-- 검색창 -->\r\n        <activity android:name=\".HomeSearchActivity\" >\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.SEARCH\" />\r\n            </intent-filter>\r\n\r\n            <meta-data\r\n                android:name=\"android.app.searchable\"\r\n                android:resource=\"@xml/searchable\" />\r\n        </activity> <!-- 검색 대화상자 표시 & 검색어 HomeSearchActivity에 전달해주는 Activity -->\r\n        <activity android:name=\".HomeSearchResultActivity\">\r\n            <meta-data\r\n                android:name=\"android.app.default_searchable\"\r\n                android:value=\".HomeSearchActivity\" />\r\n        </activity>\r\n\r\n        <!-- 내 조건 수정 -->\r\n        <activity android:name=\".ProfileMyConChangeActivity\" />\r\n\r\n        <!-- 알림 -->\r\n        <activity android:name=\".AlarmActivity\" />\r\n\r\n        <!-- 좋아요 -->\r\n        <activity android:name=\".LikeContentActivity\" />\r\n\r\n        <!-- 앱 정보 -->\r\n        <activity android:name=\".AppInfoActivity\"/>\r\n\r\n        <!-- 알림 상세 -->\r\n        <activity android:name=\".AlarmDetailActivity\" />\r\n\r\n        <!-- 매거진 상세 -->\r\n        <activity android:name=\".MagazineDetailActivity\" />\r\n\r\n        <!-- 장학금 상세 -->\r\n        <activity android:name=\".ScholarshipDetailActivity\" />\r\n\r\n\r\n\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision 5fcdb963c5372de047e67a33db66cf86028df8b7)
+++ app/src/main/AndroidManifest.xml	(date 1625653818042)
@@ -14,7 +14,7 @@
         android:theme="@style/AppTheme" >
 
         <service
-            android:name=".MyFirebaseMessagingService"
+            android:name=".SLFirebaseMessagingService"
             android:exported="false">
             <intent-filter>
                 <action android:name="com.google.firebase.MESSAGING_EVENT" />
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>apply plugin: 'com.android.application'\r\napply plugin: 'kotlin-android'\r\napply plugin: 'kotlin-android-extensions'\r\napply plugin: 'com.google.gms.google-services'\r\napply plugin: 'kotlin-kapt'\r\napply plugin: 'com.google.firebase.firebase-perf'\r\n\r\nandroid {\r\n    compileSdkVersion 29\r\n    buildToolsVersion \"30.0.3\"\r\n    defaultConfig {\r\n        applicationId \"com.cookandroid.scholarshiplike\"\r\n        minSdkVersion 26\r\n        targetSdkVersion 29\r\n        versionCode 1\r\n        versionName \"v0.1.0-alpha\"\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n\r\n    viewBinding {\r\n        enabled = true\r\n    }\r\n\r\n    dataBinding {\r\n        enabled = true\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = \"1.8\"\r\n    }\r\n\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\r\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\r\n\r\n    // androidx\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'androidx.core:core-ktx:1.3.2'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.3.1'\r\n    implementation \"androidx.recyclerview:recyclerview:1.2.0\"\r\n    implementation \"androidx.recyclerview:recyclerview-selection:1.1.0\"\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    testImplementation 'junit:junit:4.12'\r\n\r\n    // material design(BottomNavigationView)\r\n    implementation 'com.google.android.material:material:1.3.0'\r\n    implementation 'com.github.denzcoskun:ImageSlideshow:0.0.6'\r\n\r\n    // firebase\r\n    implementation platform('com.google.firebase:firebase-bom:28.1.0')\r\n    implementation 'com.google.firebase:firebase-analytics-ktx'\r\n    implementation 'com.google.firebase:firebase-firestore-ktx'\r\n    implementation 'com.google.firebase:firebase-messaging-ktx'\r\n    implementation 'com.google.android.gms:play-services-auth:19.0.0'\r\n    implementation 'com.google.firebase:firebase-perf-ktx'\r\n    implementation 'com.google.firebase:firebase-auth-ktx'\r\n    implementation 'com.google.android.gms:play-services-ads:20.2.0'\r\n\r\n    // Scholarship Tab\r\n    // noinspection GradleCompatible\r\n    implementation 'com.android.support:design: 29.0.0'\r\n\r\n    //noinspection GradleCompatible\r\n    implementation \"com.android.support:support-compat:28.0.0\"\r\n\r\n    // alarm channel\r\n    implementation 'com.kyleduo.switchbutton:library:2.0.0'\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision 5fcdb963c5372de047e67a33db66cf86028df8b7)
+++ app/build.gradle	(date 1625653848099)
@@ -75,13 +75,6 @@
     implementation 'com.google.firebase:firebase-auth-ktx'
     implementation 'com.google.android.gms:play-services-ads:20.2.0'
 
-    // Scholarship Tab
-    // noinspection GradleCompatible
-    implementation 'com.android.support:design: 29.0.0'
-
-    //noinspection GradleCompatible
-    implementation "com.android.support:support-compat:28.0.0"
-
     // alarm channel
     implementation 'com.kyleduo.switchbutton:library:2.0.0'
 
